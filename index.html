<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Calculadora de Juros</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-maskmoney/3.0.2/jquery.maskMoney.min.js"></script>
	<script type="text/javascript">
		$('document').ready(()=>{
			// Aplica formatação aos campos de inserção de valores monetários (Ex.: 1.000,00)
			$(".formating_number_input").maskMoney({thousands:'.', decimal:','})

			// Aplica formatação aos campos numéricos (campo aceita apenas números inteiros)
			$(".formating_number_input_int").maskMoney({thousands:'.', precision: 0})

			// Cálculo Juros Simples
			$("#simple_interest").click(()=>{
				let C = parseFloat($('#start_value').val().replace('.', '').replace(',', '.'))
				let i = parseFloat($('#i').val().replace('.', '').replace(',', '.')) / 100
				let t = $('#t').val()
				let M = C + (C*i*t)
				// Insere o valor na janela modal (alerta) e exibe ao usuário
				$('#result').html(Intl.NumberFormat('pt-BR', {style: 'currency', currency: 'BRL'}).format(M))
				$('#result_modal').modal('show')
			})

			// Cálculo Juros Compostos
			$("#compound_interest").click(()=>{
				let C = parseFloat($('#start_value').val().replace('.', '').replace(',', '.'))
				let A = parseFloat($('#month_value').val().replace('.', '').replace(',', '.'))
				let i = parseFloat($('#i').val().replace('.', '').replace(',', '.')) / 100
				let t = $('#t').val()
				let M = C * Math.pow((1+i), t)
				if(A){
					M += A*((Math.pow(1+i, t)-1)/i)
				}
				// Insere o valor na janela modal (alerta) e exibe ao usuário
				$('#result').html(Intl.NumberFormat('pt-BR', {style: 'currency', currency: 'BRL'}).format(M))
				$('#result_modal').modal('show')
			})
		})
	</script>
</head>
<body>
	<div class="container border mt-5 shadow" style="width: 360px;">
		<h1 class="fs-3 mt-3 text-primary">Calculadora de Juros</h1>
		<label class="fs-5 mt-1 text-dark">Valor Inicial</label>
		<div class="input-group mt-1" style="width: 280px;">
          <label class="input-group-text fs-5">R$</label>
          <input class="formating_number_input form-control fs-5" type="text" id="start_value">
		</div>
		<label class="fs-5 mt-3 text-dark">Aporte Mensal</label>
		<div class="input-group mt-1" style="width: 280px;">
          <label class="input-group-text fs-5">R$</label>
          <input class="formating_number_input form-control fs-5" type="text" id="month_value">
		</div>
		<label class="fs-5 mt-3 text-dark">Taxa de Juros (mensal)</label>
		<div class="input-group mt-1" style="width: 150px;">
          <label class="input-group-text fs-5">%</label>
          <input class="formating_number_input form-control fs-5" type="text" id="i">
		</div>
		<label class="fs-5 mt-3 text-dark">Período (em meses)</label>
		<div class="d-flex mt-1">
          <input class="formating_number_input_int form-control fs-5 w-25" type="text" id="t">
		</div>
		<div class="row mt-4 mb-3">
			<button class="col-5 btn btn-primary ms-3" id="simple_interest">Juros Simples</button>
			<button class="col-5 btn btn-success ms-2" id="compound_interest">Juros Compostos</button>
		</div>
	</div>
	<div id="result_modal" class="modal">
	    <div class="modal-dialog">
	      <div class="modal-content">
	        <div class="modal-header">
	          <h3 class="modal-title">Resultado</h3>
	          <button class="btn btn-close" data-bs-dismiss="modal"></button>
	        </div>
	        <div class="modal-body">
	          <p id="result"></p>
	        </div>
	        <div class="modal-footer">
	          <button class="btn btn-primary" data-bs-dismiss="modal">Ok</button>
	        </div>
	      </div>
	    </div>
    </div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>